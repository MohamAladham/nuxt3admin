<script setup lang="ts">import {USER_DEFAULT_AVATAR} from "@/constants";const router = useRouter();const route = useRoute();const config = useRuntimeConfig();const filter = reactive({  search: route.query.search || null,  page: route.query.page || null})// TODO: to composableconst prepareRequestQuery = (data) => {  let queryObj = {...route.query, ...data}  if (!queryObj) return ''  let query = '?';  Object.entries(queryObj).forEach((value, index) => {    if (value[1] === null) {      delete queryObj[value[0]];    } else {      query += index === 0 ? '' : '&';      query += `${value[0]}=${value[1]}`;    }  });  // update url  router.push({    path: route.path,    query: queryObj  });  return query;}// TODO: to storeconst {data: items, pending, refresh: refreshItems, error} =    await useFetch(() => config.public.apiBase + '/users' + prepareRequestQuery(filter));const itemURL = `/admin/users/`;definePageMeta({  layout: "admin",});</script><template>  <AdminItemsPage :filter="filter" , @refreshItems="refreshItems" :items="items">    <template #buttons>      <AdminUIButton to="/admin/users/create" icon="bi bi-plus">        Add New      </AdminUIButton>      <AdminUIButton color="secondary" icon="bi bi-box-arrow-right">        Export      </AdminUIButton>    </template>    <template #table>      <AdminUITable v-if="items" :titles="[{text:'User Name'}, {text:'Email'}, {text:'Manage', colWidth:2}]">        <AdminUITableRow v-for="item in items.data">          <AdminUITableCol textAlign="left">            <NuxtLink :href="itemURL+item.id">              <img :src="item.photo?item.photo:USER_DEFAULT_AVATAR" class="rounded-circle" style="width:40px; height: 40px; margin-left: 3px"/>              {{ item.name }}            </NuxtLink>          </AdminUITableCol>          <AdminUITableCol>            {{ item.email }}          </AdminUITableCol>          <AdminUITableCol :colWidth="2">            <AdminUIButton color="secondary" :to="itemURL+item.id">              Edit            </AdminUIButton>            <AdminUIButton color="danger">              Delete            </AdminUIButton>          </AdminUITableCol>        </AdminUITableRow>      </AdminUITable>    </template>  </AdminItemsPage></template>